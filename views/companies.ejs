<!DOCTYPE html>
<html lang="en">
<%- include('./commun/head') %>
<!--     <style>
        /* ===== Career ===== */
        .career-form {
            background-color: #4e63d7;
            border-radius: 5px;
            padding: 0 16px;
        }
    </style>
 -->

<body>
  <%- include('./partials/navbar') %>
  <section class="mt-100px">
    <div class="container mt-5 pt-4 ">
      <div class="row align-items-end mb-4 pb-2">
        <div class="col-md-8">
          <div class="section-title text-center text-md-start">
            <h4 class="title mb-4">Liste des partis agréés</h4>
<!--             <p class="text-muted mb-0 para-desc">Start work with Leaping. Build responsive,
              mobile-first projects on the web with the world's most popular front-end component
              library.</p> -->
          </div>
        </div>
        <!--end col-->

<!--         <div class="col-md-4 mt-4 mt-sm-0 d-none d-md-block">
          <div class="text-center text-md-end">
            <a href="#" class="text-primary">View more Jobs <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right fea icon-sm">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg></a>
          </div>
        </div> -->
        <!--end col-->
      </div>
      <!--end row-->

      <div class="row">

        <form action="/companies" method="GET" class="career-form mb-60">
          <div class="row">
            <div class="col-md-6 col-lg-3 my-3">
              <div class="input-group position-relative">
                <input type="text" class="form-control" id="search" name="search" placeholder="Recherche..." value="<%= search || '' %>">
              </div>
            </div>
            <div class="col-md-6 col-lg-3 my-3">
              <select class="form-select" id="location" name="location">
                <option value="">Location</option>
                <!-- Populate options dynamically based on locations in MongoDB -->
                <% locations.forEach(location => { %>
                <option value="<%= location %>" <%= selectedLocation === location ? 'selected' : '' %>><%= location %></option>
                <% }); %>
              </select>
            </div>
            <div class="col-md-6 col-lg-3 my-3">
              <select class="form-select" id="domain" name="domain">
                <option value="">Domain</option>
                <!-- Populate options dynamically based on domains in MongoDB -->
                <% domains.forEach(domain => { %>
                <option value="<%= domain %>" <%= selectedDomain === domain ? 'selected' : '' %>><%= domain %></option>
                <% }); %>
              </select>
            </div>
            <div class="col-md-6 col-lg-3 my-3">
              <button type="submit" class="btn btn-primary">Recherche</button>
            </div>
          </div>
        </form>
      </div>

      <div class="row mb-4 pb-2">
        <% companies.forEach(company => { %>
        <div class="col-lg-4 col-md-6 col-12 mt-4 pt-2">
          <div class="card border-0 bg-light rounded shadow">
            <div class="card-body p-4">
              <span class="badge rounded-pill bg-primary float-md-end mb-3 mb-sm-0"><i class="fa-solid fa-location-dot me-1"></i><%= company.location %></span>
              <h5 class="card-title"><%= company.name %></h5>
              <div class="mt-3">
                <span class="text-muted d-block"><i class="fa-solid fa-globe me-2"></i><a href="<%= company.link %>" target="_blank" class="text-muted text-decoration-none"><%= company.ltd %></a></span>
                <span class="text-muted d-block"><i class="fa-solid fa-phone me-2"></i><%= company.mobile %></span>
                <span class="text-muted d-block"><i class="fa-solid fa-envelope me-2"></i><%= company.email %></span>
                <span class="text-muted d-block"><i class="fa-solid fa-briefcase me-2"></i><%= company.domain %></span>
              </div>

            </div>
          </div>
        </div>
        <!--end col-->
        <% }); %>
        <!--end col-->
      </div>


      <div class="row">
        <div class="container d-flex justify-content-center">
          <nav aria-label="Page navigation example">
            <ul class="pagination pagination-primary justify-content-center">
              <% if (currentPage > 1) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= currentPage - 1 %>&location=<%= location || '' %>&domain=<%= domain || '' %>&search=<%= search || '' %>">Previous</a>
              </li>
              <% } %>
              <% for (let i = 1; i <= totalPages; i++) { %>
              <li class="page-item <%= currentPage == i ? 'active' : '' %>">
                <a class="page-link" href="?page=<%= i %>&location=<%= location || '' %>&domain=<%= domain || '' %>&search=<%= search || '' %>"><%= i %></a>
              </li>
              <% } %>
              <% if (currentPage < totalPages) { %>
              <li class="page-item">
                <a class="page-link" href="?page=<%= currentPage + 1 %>&location=<%= location || '' %>&domain=<%= domain || '' %>&search=<%= search || '' %>">Next</a>
              </li>
              <% } %>
            </ul>
          </nav>
        </div>
      </div>
  </section>





  <%- include('./commun/footer') %>
</body>

</html>