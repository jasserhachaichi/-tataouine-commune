<!DOCTYPE html>
<html lang="en">

<%- include('./commun/head') %>
<style>
  #build-wrap {
    padding: 0;
    margin: 10px 0;
    background: #f2f2f2 url('https://formbuilder.online/assets/img/noise.png');
  }
</style>
<link rel="stylesheet" href="assets/extensions/toastify-js/src/toastify.css">

<body>
  <script src="assets/static/js/initTheme.js"></script>
  <div id="app">
    <%- include('./partials/sidebar') %>
    <div id="main">
      <%- include('./partials/header') %>

      <div class="page-heading">
        <div class="page-title">
          <div class="row">
            <div class="col-12 col-md-6 order-md-1 order-last">
              <h3>Create Form</h3>
              <p class="text-subtitle text-muted">Upload and publish new video, Youtube and Local, content on the
                website or platform.</p>
            </div>

            <div class="col-12 col-md-6 order-md-2 order-first">
              <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="/dashhome">Dashboard</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Add Video
                  </li>
                </ol>
              </nav>
            </div>

          </div>
        </div>

        <section class="section">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-12">
                  <div class="form-group  mandatory">
                    <label for="title-form" class="form-label">Title</label>
                    <input type="text" id="title-form" class="form-control" placeholder="title" name="title-form" data-parsley-required="true">
                  </div>
                </div>
                <div class="col-12">
                  <div id="build-wrap"></div>
                </div>
              </div>





            </div>
          </div>
        </section>

      </div>



      <%- include('./partials/footer') %>
    </div>
  </div>


  <%- include('./commun/scripts') %>
  <script src="plugin/jquery-ui/jquery-ui.min.js"></script>
  <script src="plugin/form-builder/form-builder.min.js"></script>
  <script src="assets/extensions/toastify-js/src/toastify.js"></script>
  <!--   <script>
    jQuery($ => {
      const fbTemplate = document.getElementById('build-wrap');
      $(fbTemplate).formBuilder();
    });
  </script> -->
  <script>
          var formDataggg = [
        {
          "type": "header",
          "subtype": "h1",
          "label": "<h2 class=\"section_title wizard-header\" style=\"margin-bottom: 5px; font-size: 1.625rem; -webkit-font-smoothing: antialiased; color: rgb(34, 34, 34); font-family: &quot;Work Sans&quot;, Arial, sans-serif;\">Presentation</h2>",
          "access": false
        },
        {
          "type": "paragraph",
          "subtype": "p",
          "label": "<div>Personal info</div>",
          "access": false
        },
        {
          "type": "text",
          "required": false,
          "label": "First and Last Name",
          "placeholder": "First and Last Name",
          "className": "form-control",
          "name": "text-1714131410055-0",
          "access": false,
          "subtype": "text"
        },
        {
          "type": "text",
          "subtype": "email",
          "required": false,
          "label": "Email Address",
          "placeholder": "Email Address",
          "className": "form-control",
          "name": "text-1714131413321-0",
          "access": false
        },
        {
          "type": "text",
          "subtype": "tel",
          "required": false,
          "label": "Phone",
          "placeholder": "Phone",
          "className": "form-control",
          "name": "text-1714131473479-0",
          "access": false
        },
        {
          "type": "radio-group",
          "required": false,
          "label": "Gender",
          "inline": false,
          "name": "radio-group-1714131535724-0",
          "access": false,
          "other": false,
          "values": [
            {
              "label": "Male",
              "value": "Male",
              "selected": false
            },
            {
              "label": "Female",
              "value": "Female",
              "selected": false
            }
          ]
        },
        {
          "type": "file",
          "required": false,
          "label": "Upload Resume",
          "description": "(File accepted: .pdf, .doc/docx - Max file size: 150KB for demo limit)",
          "className": "form-control",
          "name": "file-1714131607439-0",
          "access": false,
          "multiple": false
        },
        {
          "type": "button",
          "label": "Next",
          "subtype": "button",
          "className": "btn-default btn",
          "name": "button-1714131621051-0",
          "value": "Next",
          "access": false,
          "style": "default"
        }
      ];

    function showMessage(msg, duration, color) {
      Toastify({
        text: msg,
        close: true,
        duration: duration,
        gravity: "bottom",
        position: "right",
        backgroundColor: color,
      }).showToast()
    }
    // Wait for the document to be fully loaded
    $(document).ready(() => {
      const fbTemplate = $('#build-wrap');
      const formBuilder = fbTemplate.formBuilder({
        controlPosition: 'left',
        disabledActionButtons: ['data'],
        onSave: function(evt, formData) {
          const titleForm = $('#title-form').val();



          $.ajax({
            url: '/createassistance/saveFormData',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
              title: titleForm,
              formData: formData
            }),
            success: function(response) {
              formBuilder.actions.clearFields();
              $('#title-form').val('');
              showMessage(response.message, -1, "#4fbe87");
              //console.log('Form data saved successfully:', response);
              // Handle success response here if needed
            },
            error: function(xhr, status, error) {
              showMessage(error, -1, "#dc3545");
              //console.error('Error saving form data:', error);
              // Handle error response here if needed
            }
          });




        },
        controlOrder: [
          'header',
          'paragraph',
        'text',
        'textarea',
        'number',
        'select',
        'checkbox-group',
        'radio-group',
        'date',
        'file',
        'button'
      ]
      , /* defaultFields:formDataggg
      , */



      });


    });
  </script>



</body>

</html>